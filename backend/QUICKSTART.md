# üöÄ Backend Quick Start Guide

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd backend

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.env`:

```env
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å SQLite:
DATABASE_URL=sqlite:///./farm_data.db

# –ò–ª–∏ –¥–ª—è Supabase:
DATABASE_URL=postgresql://postgres:password@db.xxx.supabase.co:5432/postgres

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π!)
SECRET_KEY=your-super-secret-key-min-32-characters-long-please-change-this

# –û—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
BACKEND_CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]
ENVIRONMENT=development
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:8000

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- **Swagger UI:** http://localhost:8000/api/v1/docs
- **ReDoc:** http://localhost:8000/api/v1/redoc
- **Health check:** http://localhost:8000/health

## üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ Swagger

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/api/v1/docs
2. –ù–∞–π–¥–∏—Ç–µ `POST /api/v1/auth/register`
3. –ù–∞–∂–º–∏—Ç–µ "Try it out"
4. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:

```json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "password123",
  "full_name": "Test User"
}
```

5. –ù–∞–∂–º–∏—Ç–µ "Execute"

### 2. –í—Ö–æ–¥ (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞)

1. –ù–∞–π–¥–∏—Ç–µ `POST /api/v1/auth/login`
2. –ù–∞–∂–º–∏—Ç–µ "Try it out"
3. –í–≤–µ–¥–∏—Ç–µ:
   - username: `testuser`
   - password: `password123`
4. –ù–∞–∂–º–∏—Ç–µ "Execute"
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `access_token` –∏–∑ –æ—Ç–≤–µ—Ç–∞

### 3. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Swagger

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Authorize" –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ (—Ñ–æ—Ä–º–∞—Ç: –ø—Ä–æ—Å—Ç–æ —Ç–æ–∫–µ–Ω, –±–µ–∑ "Bearer")
3. –ù–∞–∂–º–∏—Ç–µ "Authorize"

–¢–µ–ø–µ—Ä—å –≤—Å–µ endpoints —Ç—Ä–µ–±—É—é—â–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–µ—Ä–º—ã

1. –ù–∞–π–¥–∏—Ç–µ `POST /api/v1/farms/`
2. –ù–∞–∂–º–∏—Ç–µ "Try it out"
3. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:

```json
{
  "bin": "123456789012",
  "name": "–¢–µ—Å—Ç–æ–≤–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ",
  "region": "–ê–∫–º–æ–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
  "district": "–ê—Ä—à–∞–ª—ã–Ω—Å–∫–∏–π —Ä–∞–π–æ–Ω",
  "total_area_ha": 5000,
  "arable_area_ha": 4500
}
```

4. –ù–∞–∂–º–∏—Ç–µ "Execute"
5. –ó–∞–ø–æ–º–Ω–∏—Ç–µ `id` —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Ñ–µ—Ä–º—ã

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—è

1. –ù–∞–π–¥–∏—Ç–µ `POST /api/v1/fields/`
2. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ farm_id –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞):

```json
{
  "farm_id": 1,
  "area_ha": 150.5,
  "name": "–ü–æ–ª–µ ‚Ññ1",
  "soil_type": "–ß–µ—Ä–Ω–æ–∑–µ–º –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–π"
}
```

### 6. –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö

- `GET /api/v1/farms/` - —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö —Ñ–µ—Ä–º
- `GET /api/v1/farms/{farm_id}` - –¥–µ—Ç–∞–ª–∏ —Ñ–µ—Ä–º—ã —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- `GET /api/v1/fields/` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π
- `GET /api/v1/fields/{field_id}` - –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—è —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ
gunicorn app.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy app/

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black app/

# –õ–∏–Ω—Ç–∏–Ω–≥
flake8 app/
```

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "No module named 'app'"

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø–∞–ø–∫–µ `backend/` –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ.

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `.env` —Ñ–∞–π–ª–µ.

–î–ª—è —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQLite:
```env
DATABASE_URL=sqlite:///./farm_data.db
```

### –ü–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É:
```bash
uvicorn app.main:app --reload --port 8001
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

```
/api/v1/
‚îú‚îÄ‚îÄ /auth/
‚îÇ   ‚îú‚îÄ‚îÄ POST   /register      # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ POST   /login          # –í—Ö–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ POST   /refresh        # –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ GET    /me             # –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ POST   /change-password
‚îÇ   ‚îî‚îÄ‚îÄ POST   /logout
‚îÇ
‚îú‚îÄ‚îÄ /farms/
‚îÇ   ‚îú‚îÄ‚îÄ GET    /               # –°–ø–∏—Å–æ–∫ —Ñ–µ—Ä–º
‚îÇ   ‚îú‚îÄ‚îÄ POST   /               # –°–æ–∑–¥–∞—Ç—å —Ñ–µ—Ä–º—É
‚îÇ   ‚îú‚îÄ‚îÄ GET    /{id}           # –î–µ—Ç–∞–ª–∏ —Ñ–µ—Ä–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ PUT    /{id}           # –û–±–Ω–æ–≤–∏—Ç—å —Ñ–µ—Ä–º—É
‚îÇ   ‚îî‚îÄ‚îÄ DELETE /{id}           # –£–¥–∞–ª–∏—Ç—å —Ñ–µ—Ä–º—É
‚îÇ
‚îî‚îÄ‚îÄ /fields/
    ‚îú‚îÄ‚îÄ GET    /               # –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π
    ‚îú‚îÄ‚îÄ POST   /               # –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–µ
    ‚îú‚îÄ‚îÄ GET    /{id}           # –î–µ—Ç–∞–ª–∏ –ø–æ–ª—è
    ‚îú‚îÄ‚îÄ PUT    /{id}           # –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ
    ‚îî‚îÄ‚îÄ DELETE /{id}           # –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

Backend API —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ frontend.
